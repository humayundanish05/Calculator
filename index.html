<!doctype html>
<html lang="en">  
<head>  
<meta charset="utf-8" />  
<meta name="viewport" content="width=device-width,initial-scale=1" />  
<title>Dark Neon Calculator</title>  
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">  
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet"> 
<style>
  * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: Inter, system-ui, -apple-system, sans-serif;
}

body {
  background: #000;
  color: #fff;
  height: 100vh;
  display: flex;
  justify-content: center;
  padding: 20px;
}

.calculator {
  width: 100%;
  max-width: 360px;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

/* ░ TOP BAR ░ */
.topbar {
  display: flex;
  justify-content: space-between;
  padding: 12px 0;
  margin-bottom: 10px;
}

.topbar a {
  text-decoration: none;
  font-size: 14px;
  text-transform: uppercase;
  color: #777;
  padding: 6px 10px;
  border-radius: 10px;
}

.topbar a.active {
  color: #fff;
  background: #202020;
}

/* ░ DISPLAY ░ */
.display {
  text-align: right;
  padding: 20px;
  background: #000;
  height: 140px;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
}

.display .history {
  font-size: 16px;
  color: #888;
  margin-bottom: 4px;
  height: 20px;
}

.display .output {
  font-size: 52px;
  font-weight: 300;
  line-height: 1;
}

/* ░ BUTTON GRID ░ */
.pad {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}

/* ░ BUTTON BASE STYLE ░ */
.btn {
  width: 100%;
  height: 78px;
  font-size: 26px;
  border: none;
  border-radius: 40px;
  cursor: pointer;
  transition: 0.1s;
  display: flex;
  justify-content: center;
  align-items: center;

  /* Apple glossy effect */
  background: #333;
  color: #fff;
  box-shadow: inset 0 0 0 1px #000;
}

.btn:active {
  transform: scale(0.95);
  opacity: 0.75;
}

/* ░ GREY FUNCTION BUTTONS (AC, %, back) ░ */
.btn.func {
  background: #a5a5a5;
  color: #000;
}

/* ░ NUMBER BUTTONS ░ */
.btn.num,
.btn.special {
  background: #333;
  color: #fff;
}

/* ░ ORANGE OPERATOR BUTTONS ░ */
.btn.op {
  background: #ff9f0a;
  color: #fff;
}

/* ░ EQUAL BUTTON ░ */
.btn.eq {
  background: #ff9f0a;
  color: #fff;
}

/* Zero button wide (if you want Apple style) */
/*
[data-num="0"] {
  grid-column: span 2;
}
*/
</style> 
</head>  

<body>  
  <main class="calculator" role="application" aria-label="Calculator">  
    <header class="topbar">  
      <a href="index.html">calculator</a> 
     <a href="history.html">history</a>
      <a href="convert.html" class="active">converter</a>
      
    </header>  

<section class="display">  
  <div class="history" id="history">2,000-2%= 1,960</div>  
  <div class="output" id="output">0</div>  
</section>  

<section class="pad" id="pad">  
  <button class="btn func" data-action="clear">AC</button>  
  <button class="btn func" data-action="back">&#9003;</button>  
  <button class="btn func" data-action="percent">%</button>  
  <button class="btn op" data-action="div">&#247;</button>  

  <button class="btn num" data-num="7">7</button>  
  <button class="btn num" data-num="8">8</button>  
  <button class="btn num" data-num="9">9</button>  
  <button class="btn op" data-action="mul">&#215;</button>  

  <button class="btn num" data-num="4">4</button>  
  <button class="btn num" data-num="5">5</button>  
  <button class="btn num" data-num="6">6</button>  
  <button class="btn op" data-action="sub">&minus;</button>  

  <button class="btn num" data-num="1">1</button>  
  <button class="btn num" data-num="2">2</button>  
  <button class="btn num" data-num="3">3</button>  
  <button class="btn op" data-action="add">+</button>  

  <button class="btn special" data-action="neg">&#177;</button>  
  <button class="btn num" data-num="0">0</button>  
  <button class="btn special" data-action="dot">.</button>  
  <button class="btn eq" data-action="=">=</button>  
</section>

</main>

<script>  
(function(){  
  const outputEl = document.getElementById('output');  
  const historyEl = document.getElementById('history');  
  let current = '0', prev = null, op = null, resetNext = false;  

  function refresh(){ outputEl.textContent = current }  

  function inputNumber(n){  
    if(resetNext){ current = '0'; resetNext = false }  
    if(n === '.' && current.includes('.')) return;  
    if(current === '0' && n !== '.') current = n; else current += n;  
  }  

  function applyOp(newOp){  
    if(op && !resetNext) compute();  
    prev = parseFloat(current);  
    op = newOp;  
    resetNext = true;  

    /* SHOW LIVE EXPRESSION */
    historyEl.textContent = prev + " " + op;
  }  

  function compute(){  
    if(!op || prev === null) return;
    const a = prev, b = parseFloat(current);  
    let res = 0;  

    switch(op){  
      case '+': res = a + b; break;  
      case '-': res = a - b; break;  
      case '*': res = a * b; break;  
      case '/': res = b === 0 ? 'Error' : a / b; break;  
    }  

    current = String(res);  
    const line = `${a}${op}${b} = ${current}`;  
    historyEl.textContent = line;

    /* SAVE TO LOCAL STORAGE */
    const saved = JSON.parse(localStorage.getItem("calcHistory") || "[]");
    saved.push(line);
    localStorage.setItem("calcHistory", JSON.stringify(saved));

    op = null;  
    prev = null;  
    resetNext = true;  
  }  

  function percent(){ current = String(parseFloat(current)/100) }  
  function negate(){ current = String(parseFloat(current)*-1) }  
  function clearAll(){ current='0'; prev=null; op=null; historyEl.textContent='' }  

  document.querySelectorAll('.btn').forEach(btn=>{  
    btn.addEventListener('click',()=>{  
      const num = btn.dataset.num;  
      const action = btn.dataset.action;  

      if(num !== undefined){ inputNumber(num); refresh(); return }  

      if(action){  
        if(action==='clear') clearAll();  
        else if(action==='back'){ current=current.slice(0,-1)||'0' }  
        else if(action==='percent') percent();  
        else if(action==='neg') negate();  
        else if(action==='dot') inputNumber('.');  
        else if(action==='=') compute();  
        else if(['add','sub','mul','div'].includes(action)){  
          const map = { add: '+', sub: '-', mul: '*', div: '/' };  
          applyOp(map[action]);  
        }  
        refresh();  
      }  
    })  
  })  

  refresh();  
})();  
</script>  

</body>  
</html>
